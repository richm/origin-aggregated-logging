<filter kubernetes.**>
  type record_transformer
  enable_ruby true
  auto_typecast true
  <record>
    hostname ${(kubernetes_host rescue nil) || File.open('/etc/docker-hostname') { |f| f.readline }.rstrip}
    message ${log}
    version 1.1.4
    t ${{"docker" => record['docker'], "kubernetes" => record['kubernetes']}}
  </record>
  remove_keys log,stream,docker,kubernetes
</filter>

<filter kubernetes.**>
  type stdout
</filter>
